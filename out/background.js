// Generated by CoffeeScript 1.6.1
(function() {
  var notifyDevtools, ports;

  ports = {};

  notifyDevtools = function(msg) {
    return Object.keys(ports).forEach(function(portId_) {
      return ports[portId_].postMessage(msg);
    });
  };

  chrome.extension.onConnect.addListener(function(port) {
    if (port.name !== "devtools") {
      return;
    }
    ports[port.portId_] = port;
    port.onDisconnect.addListener(function(port) {
      return delete ports[port.portId_];
    });
    return port.onMessage.addListener(function(_arg) {
      var actionid, tabid;
      tabid = _arg.tabid, actionid = _arg.actionid;
      return chrome.tabs.executeScript(tabid, {
        file: "" + actionid + ".js"
      }, function(res) {
        var msg;
        msg = {
          tabid: tabid,
          actionid: actionid,
          result: JSON.stringify(res)
        };
        return notifyDevtools(msg);
      });
    });
  });

}).call(this);
